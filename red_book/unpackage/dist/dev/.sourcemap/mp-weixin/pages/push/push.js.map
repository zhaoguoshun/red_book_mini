{"version":3,"sources":["uni-app:///main.js","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?ff88","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?dc19","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?c8e3","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?02dc","uni-app:///pages/push/push.vue","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?7d4c","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/push/push.vue?d515"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","popupShow","popupSchoolShow","imgList","imgInfo","imgsUrl","tagList","tagcontent","categoryList","schoolList","categoryOne","categoryArr","modal","type","mid","version","onLoad","onShow","created","onBackPress","methods","back","handleClick","uni","url","hide","show","showSchool","chooseImg","title","count","sizeType","sourceType","success","filePath","name","header","accept","console","that","previewImgae","current","urls","longPressActions","itemList","fail","getCategoryTwo","getCategoryInfo","getSchoolInfo","popup","getTagContent","nextAddTag","next","key","getOne","id","str"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/DA;AAAA;AAAA;AAAA;AAAg2B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC4Hp3B;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAKA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;EACAC;IACA;EACA;EACAC;IACA;EAAA,CACA;EACAC;IACA;AACA;AACA;AACA;AACA;IACA;IACA;MACA;IACA;IACA;IACA;EACA;EAEAC;IACAC;MACA;IACA;IACAC;MACA;MACA;QACAC;QACAA;QACAA;QACAA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;MACA;IACA;IAEAC;MAAA;MACA,6BACA;QACA;MACA;IACA;IAEAC;MACA;MAEA;QACAL;UACAM;QACA;QACA;MACA;MAEA;MACAN;QACAO;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;UACA;UACAV;YACAC;YAAA;YACAU;YAAA;YACAC;YAAA;YACAC;cACAC;YACA;YACAJ;cAAA;cACA;cACAK;cACAC;YACA;UACA;QACA;MACA;IAEA;IAEAC;MACA;MACA;MACAjB;QACAkB;QAAA;QACAC;QAAA;QACAC;UACAC;UACAX;YACAM;YACAhB;YACAA;UACA;UACAsB;YACAP;UACA;QACA;MACA;IACA;IAEAQ;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACAV;MACA;MACA;MACA;IACA;IACAW;MACA;IACA;IACAC;IACAC;MAEA;MACA;MACA5B;MAEA;QAEAA;UACAC;QACA;MAEA;QACAD;UACAC;QACA;MACA;IAGA;IACA4B;MACA;MAEA;MAEA;QACA;UACAvB;QACA;QACAU;QACA;MACA;MAEA;QACA;UACAV;QACA;QACAU;MACA;QACA;UACA;YACAV;UACA;UACAU;QACA;UACA;YACAV;UACA;UACAU;QACA;UACAhB;YACA8B;YACApB;cACAM;YACA;UACA;UAEAA;UACAA;UAEAhB;;UAEA;UACA;UACA;UACAe;UACAC;UACAA;UAEAA;UACA;YACA;cACAV;YACA;YACAU;YACAA;YACAhB;cACAC;YACA;UACA;QAGA;MACA;IACA;IAEA;IACA8B;MAAA;MACA;QACAC;MACA;MACA;QAEA;QACA;QACA;QACA;QAEAhC;QACAA;QACA;QAEA;UACAiC;QACA;QAEA;MAEA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC3YA;AAAA;AAAA;AAAA;AAAivC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACArwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/push/push.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/push/push.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./push.vue?vue&type=template&id=39f2f546&scoped=true&\"\nvar renderjs\nimport script from \"./push.vue?vue&type=script&lang=js&\"\nexport * from \"./push.vue?vue&type=script&lang=js&\"\nimport style0 from \"./push.vue?vue&type=style&index=0&id=39f2f546&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39f2f546\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/push/push.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./push.vue?vue&type=template&id=39f2f546&scoped=true&\"","var components\ntry {\n  components = {\n    tuiNavigationBar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar\" */ \"thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar.vue\"\n      )\n    },\n    tuiIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-icon/tui-icon\" */ \"thorui-uni/lib/thorui/tui-icon/tui-icon.vue\"\n      )\n    },\n    tuiToast: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-toast/tui-toast\" */ \"thorui-uni/lib/thorui/tui-toast/tui-toast.vue\"\n      )\n    },\n    tuiBottomPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup\" */ \"thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup.vue\"\n      )\n    },\n    tuiListView: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-list-view/tui-list-view\" */ \"thorui-uni/lib/thorui/tui-list-view/tui-list-view.vue\"\n      )\n    },\n    tuiListCell: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-list-cell/tui-list-cell\" */ \"thorui-uni/lib/thorui/tui-list-cell/tui-list-cell.vue\"\n      )\n    },\n    tuiModal: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-modal/tui-modal\" */ \"thorui-uni/lib/thorui/tui-modal/tui-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./push.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./push.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<tui-navigation-bar backgroundColor=\"#fff\" :isFixed=\"false\" :isOpacity=\"false\">\r\n\t\t\t<view class=\"nav\">\r\n\t\t\t\t<view class=\"n-left\">\r\n\t\t\t\t\t<view @click='back'>\r\n\t\t\t\t\t\t<tui-icon name=\"arrowleft\" size=\"24\"></tui-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>发布</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"next\">\r\n\t\t\t\t\t<view @click='next'>下一步</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</tui-navigation-bar>\r\n\t\t<view class=\"main\">\r\n\r\n\t\t\t<view class=\"img-list\">\r\n\t\t\t\t<view class=\"img-item\" v-for=\"(item, index) in imgList\" :key=\"index\">\r\n\t\t\t\t\t<image :src=\"item\" @click=\"previewImgae(index)\" mode=\"aspectFill\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"img-item\">\r\n\r\n\t\t\t\t\t<view class=\"upload\">\r\n\t\t\t\t\t\t<view class=\"img-icon\" @click=\"chooseImg\">\r\n\t\t\t\t\t\t\t<tui-icon name=\"plus\"></tui-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"content\">\r\n\r\n\t\t\t\t<textarea placeholder=\"请输入内容\" maxlength=\"300\" class=\"content-input\"\r\n\t\t\t\t\tv-model=\"imgInfo.content\"></textarea>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tag\">\r\n\t\t\t\t<view class=\"icon\">\r\n\t\t\t\t\t<tui-icon name=\"bankcard\"></tui-icon>\r\n\t\t\t\t\t<p>选择分区</p>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tag-item\">\r\n\t\t\t\t\t{{ imgInfo.categoryStr }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t<view @click=\"show\">\r\n\t\t\t\t\t\t<tui-icon name=\"arrowright\"></tui-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"tag\">\n\t\t\t\t<view class=\"icon\">\n\t\t\t\t\t<tui-icon name=\"bankcard\"></tui-icon>\n\t\t\t\t\t<p>选择学校</p>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"tag-item\">\n\t\t\t\t\t{{ imgInfo.schoolStr }}\n\t\t\t\t</view>\n\t\t\t\t<view class=\"right\">\n\t\t\t\t\t<view @click=\"showSchool\">\n\t\t\t\t\t\t<tui-icon name=\"arrowright\"></tui-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<tui-toast ref=\"toast\"></tui-toast>\r\n\r\n\t\t<!-- 底部弹出 -->\r\n\t\t<tui-bottom-popup :zIndex=\"1002\" :maskZIndex=\"1001\" :show=\"popupShow\" @close=\"popup\">\r\n\t\t\t<view class=\"categoryBox\">\r\n\r\n\t\t\t\t<view class=\"category-left\">\r\n\t\t\t\t\t<scroll-view scroll-y style=\"height: 500rpx;\">\r\n\t\t\t\t\t\t<tui-list-view color=\"#777\">\r\n\t\t\t\t\t\t\t<tui-list-cell v-for=\"(category, index) in categoryList\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t@click=\"getCategoryTwo(category)\">\r\n\t\t\t\t\t\t\t\t<view>{{ category.name }}</view>\r\n\t\t\t\t\t\t\t</tui-list-cell>\r\n\t\t\t\t\t\t</tui-list-view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"category-right\">\r\n\t\t\t\t\t<scroll-view scroll-y style=\"height: 500rpx;\">\r\n\t\t\t\t\t\t<tui-list-view color=\"#777\">\r\n\t\t\t\t\t\t\t<tui-list-cell v-for=\"(category, index) in categoryOne.children\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t@click=\"getCategoryInfo(category)\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">{{ category.name }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"desc\">{{ category.description }}</view>\r\n\t\t\t\t\t\t\t</tui-list-cell>\r\n\t\t\t\t\t\t</tui-list-view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</tui-bottom-popup>\n\t\t\n\t\t<!-- 底部弹出 -->\n\t\t<tui-bottom-popup :zIndex=\"1002\" :maskZIndex=\"1001\" :show=\"popupSchoolShow\" @close=\"popup\">\n\t\t\t<view class=\"categoryBox\">\n\t\t\t\t<view>\n\t\t\t\t\t<scroll-view scroll-y style=\"height: 500rpx;\">\n\t\t\t\t\t\t<tui-list-view color=\"#777\">\n\t\t\t\t\t\t\t<tui-list-cell v-for=\"(item, index) in schoolList\" :key=\"index\"\n\t\t\t\t\t\t\t\t@click=\"getSchoolInfo(item)\">\n\t\t\t\t\t\t\t\t<view class=\"title\">{{ item.name }}</view>\n\t\t\t\t\t\t\t</tui-list-cell>\n\t\t\t\t\t\t</tui-list-view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</tui-bottom-popup>\r\n\r\n\t\t<!-- 弹框 -->\r\n\t\t<tui-modal :show=\"modal\" @click=\"handleClick\" @cancel=\"hide\" content=\"退出数据将不会保存\" color=\"#333\" :size=\"32\"\r\n\t\t\tshape=\"circle\"></tui-modal>\r\n\r\n\t</view>\r\n</template>s\r\n\r\n<script>\r\n\timport {\r\n\t\tgetCategory,\n\t\tgetSchool\r\n\t} from \"@/api/category.js\"\n\t\r\n\timport {\r\n\t\tgetOne,\r\n\t\tpublish,\r\n\t\tupload\r\n\t} from '@/api/imgDetail.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpopupShow: false,\n\t\t\t\tpopupSchoolShow:false,\r\n\t\t\t\timgList: [],\r\n\t\t\t\timgInfo: {},\r\n\t\t\t\timgsUrl: '',\r\n\t\t\t\ttagList: [],\r\n\t\t\t\ttagcontent: '',\r\n\t\t\t\tcategoryList: [],\n\t\t\t\tschoolList:[],\r\n\t\t\t\tcategoryOne: {},\r\n\t\t\t\tcategoryArr: [],\r\n\t\t\t\tmodal: false,\r\n\t\t\t\ttype: 'add',\r\n\t\t\t\tmid: '',\r\n\t\t\t\tversion: 0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {},\r\n\t\tonShow() {\r\n\t\t\tthis.getTagContent()\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// this.imgList = JSON.parse(uni.getStorageSync(\"imgList\"))\r\n\t\t},\r\n\t\tonBackPress(options) {\r\n\t\t\t/**\r\n\t\t\t * 由于 uni.navigateBack() 同样会触发 onBackPress 函数。\r\n\t\t\t * 因此在 onBackPress 中直接调用 uni.navigateBack() 并始终返回 true 会引发死循环。\r\n\t\t\t * 此时，需要根据onBackPress的回调对象中的from值来做处理，当来源是'navigateBack'时，返回 false 。\r\n\t\t\t */\r\n\t\t\t// console.log(\"----------onBackPress---------\", options)\r\n\t\t\tif (options.from === 'navigateBack') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.back();\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tback() {\r\n\t\t\t\tthis.modal = true\r\n\t\t\t},\r\n\t\t\thandleClick(e) {\r\n\t\t\t\tlet index = e.index;\r\n\t\t\t\tif (index == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"imgList\")\r\n\t\t\t\t\tuni.removeStorageSync(\"tags\")\r\n\t\t\t\t\tuni.removeStorageSync(\"imgInfo\")\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl: \"/pages/index/index\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\t\t\thide() {\r\n\t\t\t\tthis.modal = false\r\n\t\t\t},\r\n\t\t\tshow() {\r\n\t\t\t\tthis.popupShow = true\r\n\t\t\t\tgetCategory().then(res => {\r\n\t\t\t\t\tthis.categoryList = res.rows\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t\n\t\t\tshowSchool(){\n\t\t\t\tthis.popupSchoolShow = true,\n\t\t\t\tgetSchool().then(res => {\n\t\t\t\t\tthis.schoolList = res.rows\n\t\t\t\t})\n\t\t\t},\r\n\r\n\t\t\tchooseImg() {\r\n\t\t\t\tlet that = this\r\n\r\n\t\t\t\tif (that.imgList.length >= 9) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"图片上限\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet maxCount = 9 - that.imgList.length\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: maxCount, // 最多可以选择的图片张数，默认9\r\n\t\t\t\t\tsizeType: ['original'], //original 原图，compressed 压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album'], //album 从相册选图，camera 使用相机，默认二者都有。如需直接开相机或直接选相册，请只使用一个选项\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet filePath = res.tempFiles[0].path\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: 'http://localhost:8083/system/user/profile/upload', // 上传图片的接口地址\r\n\t\t\t\t\t\t\tfilePath: filePath, //所要上传的图片地址\r\n\t\t\t\t\t\t\tname: 'file', //所要上传的文件类型\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\taccept: 'application/json'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: (uploadFileRes) => { //成功的回调函数\r\n\t\t\t\t\t\t\t\tlet data = JSON.parse(uploadFileRes.data)\r\n\t\t\t\t\t\t\t\tconsole.log(data.imgUrl);\r\n\t\t\t\t\t\t\t\tthat.imgList.push('http://localhost:8083' + data.imgUrl)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\tpreviewImgae(index) {\r\n\t\t\t\tdebugger\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: index, // 当前显示图片的索引值\r\n\t\t\t\t\turls: that.imgList, // 需要预览的图片列表，photoList要求必须是数组\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\titemList: ['删除'],\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\tthat.imgList.splice(data.index, 1)\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"imgList\", JSON.stringify(that.imgList))\r\n\t\t\t\t\t\t\tuni.closePreviewImage()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tgetCategoryTwo(category) {\r\n\t\t\t\tthis.categoryOne = category\r\n\t\t\t\tthis.categoryArr[0] = category.name\r\n\t\t\t},\r\n\t\t\tgetCategoryInfo(category) {\r\n\t\t\t\tthis.categoryArr[1] = category.name\r\n\t\t\t\tthis.imgInfo.categoryId = category.id\r\n\t\t\t\tthis.imgInfo.categoryPid = category.pid\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t\tthis.imgInfo.categoryStr = this.categoryArr[0] + '-' + this.categoryArr[1]\r\n\t\t\t},\n\t\t\tgetSchoolInfo(item) {\n\t\t\t\tconsole.log('dehdfejh')\n\t\t\t\tthis.imgInfo.schoolId = item.id\n\t\t\t\tthis.popupSchoolShow = false\n\t\t\t\tthis.imgInfo.schoolStr = item.name\n\t\t\t},\r\n\t\t\tpopup() {\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\tgetTagContent() {},\r\n\t\t\tnextAddTag() {\r\n\r\n\t\t\t\t//这两行非常重要\r\n\t\t\t\tthis.imgInfo.tags = this.tagList\r\n\t\t\t\tuni.setStorageSync('imgInfo', JSON.stringify(this.imgInfo))\r\n\r\n\t\t\t\tif (this.type == 'update') {\r\n\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: \"/pages/addtag/addtag?mid=\" + this.mid + '&type=update'\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: \"/pages/addtag/addtag?mid=\" + this.mid + '&type=add'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\tnext() {\r\n\t\t\t\tlet that = this\r\n\r\n\t\t\t\tlet userInfo = uni.getStorageSync(\"userInfo\")\r\n\r\n\t\t\t\tif (that.imgList.length === 0) {\r\n\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\ttitle: \"请至少上传一个图片\",\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.$refs.toast.show(params);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (userInfo.username == null) {\r\n\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\ttitle: \"请先登录\",\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.$refs.toast.show(params);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (typeof that.imgInfo.content == 'undefined' || that.imgInfo.content == '') {\r\n\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\ttitle: \"请输入内容\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.$refs.toast.show(params);\r\n\t\t\t\t\t} else if (typeof that.imgInfo.categoryStr == 'undefined' || that.imgInfo.categoryStr == '') {\r\n\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\ttitle: \"请选择一个分区\",\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.$refs.toast.show(params);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.getStorage({\r\n\t\t\t\t\t\t\tkey: 'tags',\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tthat.tagList = JSON.parse(res.data)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tthat.imgInfo.userId = userInfo.id\r\n\t\t\t\t\t\tthat.imgInfo.tags = that.tagList\r\n\r\n\t\t\t\t\t\tuni.setStorageSync('imgInfo', JSON.stringify(that.imgInfo))\r\n\r\n\t\t\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t\t\t// \turl: '/pages/addalbum/addalbum?type=' + that.type\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(that.imgList))\r\n\t\t\t\t\t\tthat.imgInfo.cover = that.imgList[0]\r\n\t\t\t\t\t\tthat.imgInfo.count = that.imgList.length\r\n\r\n\t\t\t\t\t\tthat.imgInfo.imgsUrl = JSON.stringify(that.imgList)\r\n\t\t\t\t\t\tpublish(that.imgInfo).then(data => {\r\n\t\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\t\ttitle: \"发布成功\",\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.$refs.toast.show(params)\n\t\t\t\t\t\t\tthat.imgInfo = {}\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: \"/pages/index/index\"\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// ---------------编辑操作\r\n\t\t\tgetOne(mid) {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tid: mid\r\n\t\t\t\t}\r\n\t\t\t\tgetOne(params).then(res => {\r\n\r\n\t\t\t\t\tthis.imgInfo = res.data\r\n\t\t\t\t\tthis.imgList = res.data.imgsUrl\r\n\t\t\t\t\tthis.tagList = res.data.tagList\r\n\t\t\t\t\tthis.imgInfo.categoryStr = res.data.categoryPName + '-' + res.data.categoryName;\r\n\r\n\t\t\t\t\tuni.setStorageSync('tags', JSON.stringify(this.tagList))\r\n\t\t\t\t\tuni.setStorageSync('imgList', JSON.stringify(this.imgList))\r\n\t\t\t\t\tlet str = ''\r\n\r\n\t\t\t\t\tthis.tagList.forEach(item => {\r\n\t\t\t\t\t\tstr += '#' + item.name\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tthis.tagcontent = str\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import url(./push.css);\r\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./push.vue?vue&type=style&index=0&id=39f2f546&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./push.vue?vue&type=style&index=0&id=39f2f546&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1704811433874\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}