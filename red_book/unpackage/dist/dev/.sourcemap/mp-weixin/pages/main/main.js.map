{"version":3,"sources":["uni-app:///main.js","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?2041","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?a851","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?705b","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?2f0d","uni-app:///pages/main/main.vue","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?30d9","webpack:////Users/guoshunsir/IdeaProjects/毕设/小红书/red_book-mini2/red_book/pages/main/main.vue?da9e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Comment","InputEmoji","data","userId","imgInfo","count","album","content","comment","placeholder","val","parentId","comArr","isCollection","userIsAgree","T","isCurrentUser","useful_flag","cursor","show","fn","commentInfo","scrollTop","old","isshow","affirmId","selectImgs","popupShow","batchSaveShow","shareList","share","name","icon","color","size","operate","operate2","onLoad","onBackPress","methods","active","close","addCommentWithEmoji","scroll","getScrollTop","delComment","back","uni","delta","isFollow","fUserId","follow","followDTo","clearFollow","isAgree","agreeImg","addAgree","cancelAgreeImg","cancelAgreeComment","cancelCollect","detailId","title","isCollectImgToAlbum","previewImgae","current","urls","longPressActions","itemList","success","p","that","fail","getOne","id","loadData","getComment","addComment","getUserInfo","url","saveImgToAlbum","downLoadImg","filePath","resolve","reject","toAlbum","popup","arr","setTimeout","batchShow","delAffirm","selectAll","cancalAll","delCancel","batchSave","toTagList","console"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,6PAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,aAAa,+QAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAAg2B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC+Mp3B;AAIA;AAIA;AAGA;AAGA;AAMA;AAMA;AAGA;AAEA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;MAEAC;MAEA;MACAC;MAEA;MACAC;MACAC;QACAD;MACA;MAEA;MACAE;MACAC;MACAC;MAEA;MACAC;MACAC;MACAC;QACAC;UACAC;UACAC;UACAC;UACAC;QACA;UACAH;UACAC;UACAC;QACA;UACAF;UACAC;UACAC;UACAC;QACA;UACAH;UACAC;UACAC;QACA;UACAF;UACAC;UACAC;QACA;MACA;QACAE;UACAJ;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA;MAEA;QACAE;UACAL;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA,GACA;UACAH;UACAC;UACAE;QACA;MAEA;IACA;EACA;EACAG;IACA;IACA;IACA;MACA;MACA;IACA;IACA;EACA;EACAC;IACA;AACA;AACA;AACA;AACA;IACA;MACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;IACA;IAEAC;MAEA;MACA;MACA;MACA;IAEA;IAEAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;;MAEA;MACA;QACAC;UACAC;QACA;MACA;QACAD;UACAC;QACA;MACA;IAGA;IACA;IACAC;MAAA;MACA;MAEA;MACA;QACA9C;QACA+C;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;MACAA;;MAEA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACAD;MACAA;MACA;MACA;QACA;MACA;IACA;IAEA;IACAE;MAAA;MACA;MACApD;MACAA;MACA;QACA;MAEA;IACA;IAEAqD;MAAA;MACA;MACArD;MACAA;MACA;QACA;QACA;MACA;IACA;IAEAsD;MACA;MACAtD;MACAA;MACAA;MACAA;MACA;IACA;IAEAuD;MAAA;MACA;MACAvD;MACAA;MACAA;MACAA;MACA;QACA;QACA;MACA;IAEA;IAEAwD;MACA;MACAxD;MACAA;MACAA;MACAA;MACA;IACA;IAEAyD;MAAA;MACA;QACAC;QACAzD;MACA;MACA;QACA4C;UACAc;UACA7B;QACA;QACA;QACA;MACA;IACA;IAGA8B;MAAA;MAEA;QACA3D;QACAyD;MACA;MACA;QAEA;MACA;IACA;IAEA;IACAG;MACA;MACAhB;QACAiB;QAAA;QACAC;QAAA;QACAC;UACAC;UACAC;YAEA;YACA;cACA;cACAC;gBACAtB;kBACAc;kBACA7B;gBACA;cACA;YACA;YACA;YACA;cACAsC;YACA;UAGA;UACAC;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;MACA;MAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;QACA;MAEA;IACA;IACAC;MACA;IACA;IAEAC;MACA;;MAEA;MACA;MACA;IACA;IAEAC;MAAA;MACA;MAEA;QACA;MACA;QAEA;QACAvD;QACAA;QACAA;QACA;QACA;UACAA;UACAA;UACAA;UACAA;QAEA;UACAA;UACAA;UACAA;UACA;UACA;YACAA;UACA;YACAA;UACA;QACA;QAIA;UACA;UACA;UACA;UACA;UACA;UAEA;YACA;UACA;QAEA;MACA;IACA;IACAwD;MACA9B;QACA+B;MACA;IACA;IAEAC;MAAA;MACA;QACAnB;QACAzD;MACA;MACA;QACA4C;UACAc;UACA7B;QACA;QACA;QACA;MACA;IACA;IACA;IACAgD;MACA;MACA;QACAjC;UACA+B;UACAV;YACA;cACA;cACArB;gBACAkC;gBACAb;kBACAc;gBACA;gBACAX;kBACAY;gBACA;cACA;YACA;UACA;QACA;MACA;MACA;IAEA;IAEAC;MACArC;QACA+B;MACA;IACA;IAEA;IACAO;MACA;IACA;IACAlD;MAEA;MACA;QAEAY;UACA+B;QACA;MACA;QAEA;QACAQ;QACA;UACAvC;YACAc;UACA;UAEA0B;YACAxC;cACA+B;YACA;UACA;QAEA;MACA;QAEA;QACA;QACA;UACA;QACA;MAEA;IACA;IAEA1C;MAEA;QACA;QACA;QACA;QACA;UACA;QACA;MACA;IACA;IAEAoD;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACA;MACA;IACA;IACAC;MAEA;IACA;IACAC;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACA9C;QACAc;QACA7B;MACA;MAEA;QACA;MACA;MAEAuD;QACAxC;UACAc;UACA7B;QACA;QAEA;MACA;IACA;IAEA8D;MACAC;MACAhD;QACA+B;MACA;IACA;IAEAhD;MAEA;QACA;MAAA;IAGA;EAGA;AAEA;AAAA,2B;;;;;;;;;;;;;ACh0BA;AAAA;AAAA;AAAA;AAAivC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACArwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/main/main.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/main/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=52f690a6&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52f690a6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=52f690a6&scoped=true&\"","var components\ntry {\n  components = {\n    tuiNavigationBar: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar\" */ \"thorui-uni/lib/thorui/tui-navigation-bar/tui-navigation-bar.vue\"\n      )\n    },\n    tuiButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-button/tui-button\" */ \"thorui-uni/lib/thorui/tui-button/tui-button.vue\"\n      )\n    },\n    tuiIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-icon/tui-icon\" */ \"thorui-uni/lib/thorui/tui-icon/tui-icon.vue\"\n      )\n    },\n    tuiGrid: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-grid/tui-grid\" */ \"thorui-uni/lib/thorui/tui-grid/tui-grid.vue\"\n      )\n    },\n    tuiGridItem: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-grid-item/tui-grid-item\" */ \"thorui-uni/lib/thorui/tui-grid-item/tui-grid-item.vue\"\n      )\n    },\n    tuiBottomPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup\" */ \"thorui-uni/lib/thorui/tui-bottom-popup/tui-bottom-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.isCurrentUser\n    ? _vm.__map(_vm.shareList[1].operate, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g0 = _vm.shareList[1].operate.length\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n    : null\n  var l1 = !_vm.isCurrentUser\n    ? _vm.__map(_vm.shareList[2].operate2, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var g1 = _vm.shareList[2].operate2.length\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  var g2 = _vm.shareList[0].share.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<tui-navigation-bar backgroundColor=\"#fff\" :isFixed=\"true\" :isOpacity=\"false\">\r\n\t\t\t<view class=\"nav\">\r\n\r\n\t\t\t\t<view class=\"center\">\r\n\t\t\t\t\t<view @click=\"getUserInfo(imgInfo.user.userId)\">\r\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"imgInfo.avatar\" mode=\"aspectFill\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"username\">{{ imgInfo.user.nickName }}</view>\r\n\r\n\t\t\t\t\t<view v-if=\"imgInfo.userId != userId\" class=\"followStatus\">\r\n\t\t\t\t\t\t<view v-if=\"T\">\r\n\t\t\t\t\t\t\t<tui-button @click=\"clearFollow(imgInfo.userId)\" type=\"gray\" height=\"50rpx\" :size=\"22\"\r\n\t\t\t\t\t\t\t\twidth=\"100rpx\" shape=\"circle\" plain>已关注</tui-button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else>\r\n\t\t\t\t\t\t\t<tui-button @click=\"follow(imgInfo.userId)\" type=\"danger\" height=\"50rpx\" :size=\"22\"\r\n\t\t\t\t\t\t\t\twidth=\"100rpx\" shape=\"circle\" plain>关注</tui-button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<tui-icon name=\"more-fill\" size=\"20\" @click=\"popup\"></tui-icon>\r\n\t\t\t</view>\r\n\t\t</tui-navigation-bar>\r\n\t\t<scroll-view scroll-y class=\"page\" @scrolltolower=\"loadData\" @scroll=\"scroll\" :scroll-top=\"scrollTop\">\r\n\t\t\t<view class=\"img-list\">\r\n\t\t\t\t<!-- 重做图片显示模块 -->\r\n\t\t\t\t<view class=\"img-list-one\" v-if=\"count==1\">\r\n\t\t\t\t\t<img :src=\"imgInfo.imgsUrl[0]\" width=\"100%\" @click=\"previewImgae(0)\"></img>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"img-list-two\" v-if=\"count==2\">\r\n\r\n\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[0]\" mode=\"widthFix\" @click=\"previewImgae(0)\"></image>\r\n\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[1]\" mode=\"widthFix\" @click=\"previewImgae(1)\"></image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"img-list-five\" v-if=\"count==5\">\r\n\t\t\t\t\t<view class=\"img-list-five-top\">\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[0]\" mode=\"aspectFill\" @click=\"previewImgae(0)\"\r\n\t\t\t\t\t\t\tstyle=\"width: 50%;height: 600rpx;\" class=\"fadeImg\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[1]\" mode=\"aspectFill\" @click=\"previewImgae(1)\"\r\n\t\t\t\t\t\t\tstyle=\"width: 50%;height: 600rpx;\" class=\"fadeImg\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class='img-list-five-down'>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[2]\" mode=\"aspectFill\" @click=\"previewImgae(2)\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[3]\" mode=\"aspectFill\" @click=\"previewImgae(3)\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[4]\" mode=\"aspectFill\" @click=\"previewImgae(4)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t<tui-grid :unlined=\"true\" v-if=\"count==3||count==4||count==6||count==8\">\r\n\t\t\t\t\t<block v-for=\"(item, index) in imgInfo.imgsUrl\" :key=\"index\">\r\n\t\t\t\t\t\t<tui-grid-item :cell=\"2\" :border=\"false\" :bottomLine=\"false\">\r\n\t\t\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item\" mode=\"aspectFill\" @click=\"previewImgae(index)\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 100%;height: 600rpx;\" class=\"fadeImg\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</tui-grid-item>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</tui-grid>\r\n\r\n\r\n\t\t\t\t<view v-if=\"count==7\">\r\n\t\t\t\t\t<view class=\"img-list-five-top\">\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[0]\" mode=\"aspectFill\" @click=\"previewImgae(0)\"\r\n\t\t\t\t\t\t\tstyle=\"height: 500rpx;\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[1]\" mode=\"aspectFill\" @click=\"previewImgae(1)\"\r\n\t\t\t\t\t\t\tstyle=\"height: 500rpx;\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"img-list-five-top\">\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[2]\" mode=\"aspectFill\" @click=\"previewImgae(2)\"\r\n\t\t\t\t\t\t\tstyle=\"height: 500rpx;\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[3]\" mode=\"aspectFill\" @click=\"previewImgae(3)\"\r\n\t\t\t\t\t\t\tstyle=\"height: 500rpx;\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class='img-list-five-down'>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[4]\" mode=\"aspectFill\" @click=\"previewImgae(4)\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[5]\" mode=\"aspectFill\" @click=\"previewImgae(5)\"></image>\r\n\t\t\t\t\t\t<image :src=\"imgInfo.imgsUrl[6]\" mode=\"aspectFill\" @click=\"previewImgae(6)\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t<tui-grid :unlined=\"true\" v-if=\"count==9\">\r\n\t\t\t\t\t<block v-for=\"(item, index) in imgInfo.imgsUrl\" :key=\"index\">\r\n\t\t\t\t\t\t<tui-grid-item :cell=\"3\" :border=\"false\" :bottomLine=\"false\">\r\n\t\t\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item\" @click=\"previewImgae(index)\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 300rpx;height: 300rpx;\" class=\"fadeImg\" />\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</tui-grid-item>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</tui-grid>\r\n\r\n\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cont\">\r\n\t\t\t\t<view class=\"img-content\">{{ imgInfo.content }}</view>\r\n\t\t\t\t<view class=\"time\">{{ imgInfo.time }}|{{ imgInfo.viewCount }}浏览</view>\r\n\t\t\t</view>\r\n\t\t\r\n\r\n\t\t\t<view class=\"comment\" v-if='imgInfo.commentCount>0'>\r\n\t\t\t\t<view style=\"font-weight: bold;margin-left: 40rpx;\">所有评论</view>\r\n\t\t\t\t<!--  scrollTop，comArr实现评论跳转，-->\r\n\t\t\t\t<comment :mid='imgInfo.id' @getComment=\"getComment\" @addAgree=\"addAgree\" @scrollTop=\"getScrollTop\"\r\n\t\t\t\t\t@cancelAgreeComment=\"cancelAgreeComment\" :val=\"val\" :parentId=\"parentId\" :comArr='comArr'\r\n\t\t\t\t\t:commentInfo='commentInfo' :currentUid='imgInfo.userId' @delComment='delComment'>\r\n\t\t\t\t</comment>\r\n\t\t\t\t<!-- 评论功能 -->\r\n\t\t\t</view>\r\n\t\t\t<view v-else style=\"height: 200rpx\"></view>\r\n\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 底部输入框 -->\r\n\t\t<view :class=\"fn?'fotter fotter-none':'fotter'\">\r\n\r\n\t\t\t<view v-if=\"!useful_flag\" class=\"fotter-info\">\r\n\t\t\t\t<view class=\"fotter-content\" @click=\"active\">{{ placeholder }}</view>\r\n\t\t\t\t<tui-icon name=\"star-fill\" size=\"20\" v-if=\"isCollection\" @click=\"cancelCollect()\"></tui-icon>\r\n\t\t\t\t<tui-icon name=\"star\" size=\"20\" v-else @click=\"saveImgToAlbum()\"></tui-icon>\r\n\t\t\t\t<view class=\"fotter-c-a\">{{ imgInfo.collectionCount }}</view>\r\n\r\n\t\t\t\t<tui-icon name=\"agree-fill\" size=\"20\" v-if=\"userIsAgree\" @click=\"cancelAgreeImg()\"></tui-icon>\r\n\t\t\t\t<tui-icon name=\"agree\" size=\"20\" v-else @click=\"agreeImg\"></tui-icon>\r\n\t\t\t\t<view class=\"fotter-c-a\">{{ imgInfo.agreeCount }}</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 新增表情发送 -->\r\n\t\t\t<input-emoji v-else :useful_flag=\"useful_flag\" :cursor=\"cursor\" @addCommentWithEmoji=\"addCommentWithEmoji\"\r\n\t\t\t\t:placeholder=\"placeholder\">\r\n\t\t\t</input-emoji>\n\t\t\t\r\n\t\t</view>\r\n\t\t<!-- 底部输入框完成 -->\r\n\r\n\t\t<!--底部分享弹窗-->\r\n\t\t<tui-bottom-popup backgroundColor=\"#f6f6f6\" :zIndex=\"1002\" :maskZIndex=\"1001\" :show=\"popupShow\" @close=\"popup\">\r\n\t\t\t<view class=\"tui-share\">\r\n\t\t\t\t<view class=\"tui-share-title\">操作</view>\r\n\r\n\t\t\t\t<view class=\"tui-share-top\" v-if=\"isCurrentUser\">\r\n\r\n\t\t\t\t\t<view class=\"tui-share-item\"\r\n\t\t\t\t\t\t:class=\"[shareList[1].operate.length - 1 === index ? 'tui-item-last' : '']\"\r\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[1].operate\" :key=\"index\" @tap=\"popup\">\r\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\">\r\n\t\t\t\t\t\t\t<view @click=\"operate(index)\">\r\n\t\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" color=\"#404040\" :size=\"item.size\"></tui-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"tui-share-top\" v-else>\r\n\r\n\t\t\t\t\t<view class=\"tui-share-item\"\r\n\t\t\t\t\t\t:class=\"[shareList[2].operate2.length - 1 === index ? 'tui-item-last' : '']\"\r\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[2].operate2\" :key=\"index\" @tap=\"popup\">\r\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\">\r\n\t\t\t\t\t\t\t<view @click=\"operate2(index)\">\r\n\t\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" color=\"#404040\" :size=\"item.size\"></tui-icon>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\r\n\r\n\t\t\t\t<view class=\"tui-share-bottom tui-mt\">\r\n\t\t\t\t\t<view class=\"tui-share-item\"\r\n\t\t\t\t\t\t:class=\"[shareList[0].share.length - 1 === index ? 'tui-item-last' : '']\"\r\n\t\t\t\t\t\tv-for=\"(item, index) in shareList[0].share\" :key=\"index\" @tap=\"popup\">\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"tui-share-icon\" hover-class=\"tui-hover\" :hover-stay-time=\"150\"\r\n\t\t\t\t\t\t\t@click=\"share(index)\">\r\n\t\t\t\t\t\t\t<tui-icon :name=\"item.icon\" :color=\"item.color\" :size=\"item.size ? item.size : 36\">\r\n\t\t\t\t\t\t\t</tui-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tui-share-text\">{{ item.name }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tui-empty\">!</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tui-btn-cancle\" @tap=\"popup\">取消</view>\r\n\t\t\t</view>\r\n\t\t</tui-bottom-popup>\r\n\r\n\r\n\t\t<!-- 批量保存 -->\r\n\t\t<!-- 蒙板 -->\r\n\t\t<view class=\"shade\" v-show=\"show\" @click=\"close\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Comment from \"@/components/comment.vue\"\r\n\timport InputEmoji from \"@/components/inputEmoji.vue\"\r\n\r\n\timport {\r\n\t\tlistDetail,\r\n\t\tgetDetail\r\n\t} from \"@/api/detail.js\"\r\n\timport {\r\n\t\tgetOne,\r\n\t\tdeleteImgs\r\n\t} from '@/api/imgDetail.js'\r\n\timport {\r\n\t\taddComment,addCollect\r\n\t} from \"@/api/comment.js\"\r\n\timport {\r\n\t\tisCollectImgToAlbum\r\n\t} from \"@/api/album.js\"\r\n\timport {\r\n\t\tagree,\r\n\t\tisAgree,\r\n\t\tcancelAgree,\r\n\t\tcancelCollection\r\n\t} from \"@/api/agreeCollect.js\"\r\n\timport {\r\n\t\tgetIsFollow,\r\n\t\tfollowUser,\n\t\taddFolow,\r\n\t\tclearFollow\r\n\t} from \"@/api/follow.js\"\r\n\timport {\r\n\t\tappConfig\r\n\t} from '@/config/config.js'\r\n\timport {\r\n\t\ttimeAgo\r\n\t} from \"@/utils/webUtils.js\"\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tComment,\r\n\t\t\tInputEmoji\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tuserId:'',\r\n\t\t\t\timgInfo: {},\r\n\t\t\t\tcount: 0,\r\n\t\t\t\talbum: {},\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tcomment: {},\r\n\r\n\t\t\t\tplaceholder: '请输入内容~',\r\n\t\t\t\tval: 0,\r\n\t\t\t\tparentId: '',\r\n\t\t\t\tcomArr: [],\r\n\t\t\t\tisCollection: false,\r\n\t\t\t\tuserIsAgree: false,\r\n\t\t\t\tT: false,\r\n\t\t\t\tisCurrentUser: false,\r\n\r\n\t\t\t\t//\r\n\t\t\t\tuseful_flag: false,\r\n\t\t\t\tcursor: false,\r\n\t\t\t\tshow: false,\r\n\r\n\t\t\t\tfn: false,\r\n\r\n\t\t\t\t//\r\n\t\t\t\tcommentInfo: {},\r\n\r\n\t\t\t\t//滚动\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\told: {\r\n\t\t\t\t\tscrollTop: 0\r\n\t\t\t\t},\r\n\r\n\t\t\t\t//批量保存\r\n\t\t\t\tisshow: false,\r\n\t\t\t\taffirmId: '',\r\n\t\t\t\tselectImgs: [],\r\n\r\n\t\t\t\t//实现编辑操作\r\n\t\t\t\tpopupShow: false,\r\n\t\t\t\tbatchSaveShow: false,\r\n\t\t\t\tshareList: [{\r\n\t\t\t\t\tshare: [{\r\n\t\t\t\t\t\tname: \"QQ\",\r\n\t\t\t\t\t\ticon: \"qq\",\r\n\t\t\t\t\t\tcolor: \"#07BDFD\",\r\n\t\t\t\t\t\tsize: 34\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: \"微信\",\r\n\t\t\t\t\t\ticon: \"wechat\",\r\n\t\t\t\t\t\tcolor: \"#80D640\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: \"朋友圈\",\r\n\t\t\t\t\t\ticon: \"moments\",\r\n\t\t\t\t\t\tcolor: \"#80D640\",\r\n\t\t\t\t\t\tsize: 32\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: \"新浪微博\",\r\n\t\t\t\t\t\ticon: \"sina\",\r\n\t\t\t\t\t\tcolor: \"#F9C718\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: \"复制链接\",\r\n\t\t\t\t\t\ticon: \"applets\",\r\n\t\t\t\t\t\tcolor: \"#2BA348\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t}, {\r\n\t\t\t\t\toperate: [{\r\n\t\t\t\t\t\t\tname: \"编辑\",\r\n\t\t\t\t\t\t\ticon: \"edit\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"删除图片\",\r\n\t\t\t\t\t\t\ticon: \"offline\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"社区公约\",\r\n\t\t\t\t\t\t\ticon: \"nodata\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"批量保存\",\r\n\t\t\t\t\t\t\ticon: \"picture\",\r\n\t\t\t\t\t\t\tsize: 28\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}, {\r\n\t\t\t\t\toperate2: [{\r\n\t\t\t\t\t\t\tname: \"批量保存\",\r\n\t\t\t\t\t\t\ticon: \"picture\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"不感兴趣\",\r\n\t\t\t\t\t\t\ticon: \"dissatisfied\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"举报\",\r\n\t\t\t\t\t\t\ticon: \"about\",\r\n\t\t\t\t\t\t\tsize: 30\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tname: \"社区公约\",\r\n\t\t\t\t\t\t\ticon: \"immore\",\r\n\t\t\t\t\t\t\tsize: 28\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\r\n\t\t\t\t}],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.imgInfo.id = option.mid\n\t\t\tthis.userId = uni.getStorageSync(\"userInfo\").id\r\n\t\t\tif (option.cid != null) {\r\n\t\t\t\tthis.comArr[0] = option.cid\r\n\t\t\t\tthis.comArr[1] = option.rid\r\n\t\t\t}\r\n\t\t\tthis.getOne()\r\n\t\t},\r\n\t\tonBackPress(options) {\r\n\t\t\t/**\r\n\t\t\t * 由于 uni.navigateBack() 同样会触发 onBackPress 函数。\r\n\t\t\t * 因此在 onBackPress 中直接调用 uni.navigateBack() 并始终返回 true 会引发死循环。\r\n\t\t\t * 此时，需要根据onBackPress的回调对象中的from值来做处理，当来源是'navigateBack'时，返回 false 。\r\n\t\t\t */\r\n\t\t\tif (options.from === 'navigateBack') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.back();\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tactive() {\r\n\t\t\t\tthis.useful_flag = true\r\n\t\t\t\tthis.cursor = true\r\n\t\t\t\tthis.show = true\r\n\t\t\t},\r\n\r\n\t\t\tclose() {\r\n\r\n\t\t\t\tthis.useful_flag = false\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.placeholder = '请输入内容~'\r\n\t\t\t\tthis.comment = {}\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddCommentWithEmoji(content) {\n\t\t\t\tdebugger\r\n\t\t\t\tthis.useful_flag = false\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tthis.content = content\r\n\t\t\t\tthis.addComment()\r\n\t\t\t},\r\n\r\n\t\t\tscroll(e) {\r\n\t\t\t\tthis.old.scrollTop = e.detail.scrollTop\r\n\t\t\t},\r\n\r\n\t\t\tgetScrollTop(top) {\r\n\t\t\t\tthis.scrollTop = this.old.scrollTop\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.scrollTop = top\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tdelComment(flag) {\r\n\t\t\t\tthis.fn = flag\r\n\t\t\t},\r\n\r\n\t\t\tback() {\r\n\t\t\t\tlet pages = getCurrentPages()\r\n\r\n\t\t\t\t//返回上一页面部分\r\n\t\t\t\tif (this.isCollection) {\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: pages.length\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\t//-------------------关注部分-------------------\r\n\t\t\tisFollow() {\r\n\t\t\t\tlet userId = uni.getStorageSync(\"userInfo\").id\r\n\r\n\t\t\t\tlet fUserId = this.imgInfo.userId\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\tfUserId: fUserId\r\n\t\t\t\t}\r\n\t\t\t\tgetIsFollow(params).then(res => {\r\n\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\tthis.T = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.T = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//关注用户\r\n\t\t\tfollow(fid) {\r\n\t\t\t\tlet curUser = uni.getStorageSync(\"userInfo\")\r\n\t\t\t\tlet followDTo = {}\r\n\t\t\t\tfollowDTo.userId = curUser.id\r\n\t\t\t\tfollowDTo.quiltUserId = fid\n\t\t\t\r\n\t\t\t\t//添加关注\r\n\t\t\t\taddFolow(followDTo).then(res => {\r\n\t\t\t\t\tthis.T = true;\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//取消关注\r\n\t\t\tclearFollow(fid) {\r\n\t\t\t\tlet user = uni.getStorageSync(\"userInfo\")\r\n\t\t\t\tlet followDTo = {}\r\n\t\t\t\tfollowDTo.userId = user.id\r\n\t\t\t\tfollowDTo.quiltUserId = fid\r\n\t\t\t\t//添加关注\n\t\t\t\taddFolow(followDTo).then(res => {\n\t\t\t\t\tthis.T = false;\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//----------------------点赞部分-----------------\r\n\t\t\tisAgree() {\r\n\t\t\t\tlet data = {}\r\n\t\t\t\tdata.userId = uni.getStorageSync(\"userInfo\").id\r\n\t\t\t\tdata.detailId = this.imgInfo.id\r\n\t\t\t\tisAgree(data).then(res => {\r\n\t\t\t\t\tthis.userIsAgree = res.data\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tagreeImg() {\r\n\t\t\t\tlet data = {}\r\n\t\t\t\tdata.userId = uni.getStorageSync(\"userInfo\").id\r\n\t\t\t\tdata.detailId = this.imgInfo.id\r\n\t\t\t\tagree(data).then(res => {\r\n\t\t\t\t\tthis.userIsAgree = true\r\n\t\t\t\t\tthis.imgInfo.agreeCount = this.imgInfo.agreeCount * 1 + 1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\taddAgree(comment) {\r\n\t\t\t\tlet data = {}\r\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\r\n\t\t\t\tdata.type = 0\r\n\t\t\t\tdata.agreeCollectId = comment.id\r\n\t\t\t\tdata.agreeCollectUid = comment.uid\r\n\t\t\t\tagree(data).then()\r\n\t\t\t},\r\n\r\n\t\t\tcancelAgreeImg() {\r\n\t\t\t\tlet data = {}\r\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\r\n\t\t\t\tdata.agreeCollectId = this.imgInfo.id\r\n\t\t\t\tdata.agreeCollectUid = this.imgInfo.userId\r\n\t\t\t\tdata.type = 1\r\n\t\t\t\tcancelAgree(data).then(res => {\r\n\t\t\t\t\tthis.userIsAgree = false\r\n\t\t\t\t\tthis.imgInfo.agreeCount = this.imgInfo.agreeCount * 1 - 1\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcancelAgreeComment(comment) {\r\n\t\t\t\tlet data = {}\r\n\t\t\t\tdata.uid = uni.getStorageSync(\"userInfo\").id\r\n\t\t\t\tdata.agreeCollectId = comment.id\r\n\t\t\t\tdata.agreeCollectUid = comment.uid\r\n\t\t\t\tdata.type = 0\r\n\t\t\t\tcancelAgree(data).then()\r\n\t\t\t},\r\n\r\n\t\t\tcancelCollect() {\n\t\t\t\tlet query = {\n\t\t\t\t\tdetailId: this.imgInfo.id,\n\t\t\t\t\tuserId: uni.getStorageSync(\"userInfo\").id\n\t\t\t\t}\n\t\t\t\taddCollect(query).then(data =>{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"取消收藏成功\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t});\n\t\t\t\t\tthis.getOne()\n\t\t\t\t\treturn\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\tisCollectImgToAlbum() {\r\n\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tuserId: uni.getStorageSync(\"userInfo\").id,\r\n\t\t\t\t\tdetailId: this.imgInfo.id\r\n\t\t\t\t}\r\n\t\t\t\tisCollectImgToAlbum(params).then(res => {\r\n\r\n\t\t\t\t\tthis.isCollection = res.data\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//-----------------------------------预览图片----------------\r\n\t\t\tpreviewImgae(index) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: index, // 当前显示图片的索引值\r\n\t\t\t\t\turls: that.imgInfo.imgsUrl, // 需要预览的图片列表，photoList要求必须是数组\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\titemList: ['保存', '收藏'],\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\r\n\t\t\t\t\t\t\t//进行保存\r\n\t\t\t\t\t\t\tif (data.tapIndex == 0) {\r\n\t\t\t\t\t\t\t\tlet p = that.downLoadImg(that.imgInfo.imgsUrl[data.index])\r\n\t\t\t\t\t\t\t\tp.then((data) => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: data,\r\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//进行收藏\r\n\t\t\t\t\t\t\tif (data.tapIndex == 1) {\r\n\t\t\t\t\t\t\t\tthat.saveImgToAlbum()\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetOne() {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tid: this.imgInfo.id\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgetDetail(this.imgInfo.id).then(res => {\r\n\t\t\t\t\tthis.imgInfo = res.data\r\n\t\t\t\t\tthis.imgInfo.time = timeAgo(new Date(res.data.time))\r\n\t\t\t\t\tthis.count = res.data.imgsUrl.length\r\n\t\t\t\t\tthis.album = res.data.album\r\n\t\t\t\t\tthis.isFollow()\r\n\t\t\t\t\tthis.isAgree()\r\n\t\t\t\t\tthis.isCollectImgToAlbum()\r\n\t\t\t\t\tif (this.imgInfo.userId == uni.getStorageSync(\"userInfo\").id) {\r\n\t\t\t\t\t\tthis.isCurrentUser = true\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloadData() {\r\n\t\t\t\tthis.val = Math.random()\r\n\t\t\t},\r\n\r\n\t\t\tgetComment(comment) {\r\n\t\t\t\tthis.comment = comment\r\n\r\n\t\t\t\t//第二种方案\r\n\t\t\t\tthis.placeholder = '回复' + this.comment.username + ':'\r\n\t\t\t\tthis.active()\r\n\t\t\t},\r\n\r\n\t\t\taddComment() {\r\n\t\t\t\tlet userInfo = uni.getStorageSync(\"userInfo\")\r\n\r\n\t\t\t\tif (userInfo == null || typeof userInfo == 'undefined') {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tlet commentInfo = {}\r\n\t\t\t\t\tcommentInfo.content = this.content\r\n\t\t\t\t\tcommentInfo.uid = userInfo.id\r\n\t\t\t\t\tcommentInfo.mid = this.imgInfo.id\r\n\t\t\t\t\t//添加一级评论\r\n\t\t\t\t\tif (this.comment.id == null) {\r\n\t\t\t\t\t\tcommentInfo.pid = 0\r\n\t\t\t\t\t\tcommentInfo.replyId = 0\r\n\t\t\t\t\t\tcommentInfo.replyUid = 0\r\n\t\t\t\t\t\tcommentInfo.level = 1\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcommentInfo.level = 2\r\n\t\t\t\t\t\tcommentInfo.replyId = this.comment.id\r\n\t\t\t\t\t\tcommentInfo.replyUid = this.comment.uid\r\n\t\t\t\t\t\t//添加二级评论\r\n\t\t\t\t\t\tif (this.comment.pid == 0) {\r\n\t\t\t\t\t\t\tcommentInfo.pid = this.comment.id\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcommentInfo.pid = this.comment.pid\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\r\n\r\n\t\t\t\t\taddComment(commentInfo).then(res => {\r\n\t\t\t\t\t\tthis.content = ''\r\n\t\t\t\t\t\tthis.comment = {}\r\n\t\t\t\t\t\tthis.parentId = commentInfo.pid\r\n\t\t\t\t\t\tthis.commentInfo = res.data\r\n\t\t\t\t\t\tthis.placeholder = \"请输入内容~\"\r\n\r\n\t\t\t\t\t\tif (this.imgInfo.commentCount == 0) {\r\n\t\t\t\t\t\t\tthis.imgInfo.commentCount = this.imgInfo.commentCount * 1 + 1\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetUserInfo(uid) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/otherUser/otherUser?uid=\" + uid\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsaveImgToAlbum() {\n\t\t\t\tlet query = {\n\t\t\t\t\tdetailId: this.imgInfo.id,\n\t\t\t\t\tuserId: uni.getStorageSync(\"userInfo\").id\n\t\t\t\t}\n\t\t\t\taddCollect(query).then(data =>{\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: \"收藏成功\",\n\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t});\n\t\t\t\t\tthis.getOne()\n\t\t\t\t\treturn\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 保存图片至本地\r\n\t\t\tdownLoadImg(path) {\r\n\t\t\t\t//下载图片资源至本地，返回文件的本地临时路径\r\n\t\t\t\tlet p = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: path,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\t\t//保存图片至相册\r\n\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\t\t\t\t\tresolve(\"保存成功\")\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\t\t\t\treject(\"保存失败\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\treturn p;\r\n\r\n\t\t\t},\r\n\r\n\t\t\ttoAlbum(aid) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/user/albums/albumInfo?albumId=\" + aid\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//-----------------编辑功能部分------------------\r\n\t\t\tpopup() {\r\n\t\t\t\tthis.popupShow = !this.popupShow\r\n\t\t\t},\r\n\t\t\toperate(index) {\r\n\r\n\t\t\t\t//编辑操作\r\n\t\t\t\tif (index == 0) {\r\n\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: \"/pages/push/push?mid=\" + this.imgInfo.id + '&type=update' + '&version=' + 0\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (index == 1) {\r\n\r\n\t\t\t\t\tlet arr = []\r\n\t\t\t\t\tarr.push(this.imgInfo.id)\r\n\t\t\t\t\tdeleteImgs(arr, this.imgInfo.userId).then(res => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"删除成功\"\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index?currentTab=1'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, 1000)\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (index == 3) {\r\n\r\n\t\t\t\t\tthis.batchSaveShow = true\r\n\t\t\t\t\t// this.isshow = true\r\n\t\t\t\t\tfor (var i = 0; i < this.imgInfo.imgsUrl.length; i++) {\r\n\t\t\t\t\t\tthis.selectImgs.push(i)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\toperate2(index) {\r\n\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\t//批量保存\r\n\t\t\t\t\tthis.batchSaveShow = true\r\n\t\t\t\t\t// this.isshow = true\r\n\t\t\t\t\tfor (var i = 0; i < this.imgInfo.imgsUrl.length; i++) {\r\n\t\t\t\t\t\tthis.selectImgs.push(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tbatchShow() {\r\n\t\t\t\tthis.batchSaveShow = false\r\n\t\t\t},\r\n\r\n\t\t\tdelAffirm(index) {\r\n\t\t\t\tthis.selectImgs.push(index)\r\n\t\t\t},\r\n\r\n\t\t\tselectAll() {\r\n\t\t\t\tfor (let i = 0; i < this.imgInfo.imgsUrl.length; i++) {\r\n\t\t\t\t\tthis.selectImgs.push(i)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcancalAll() {\r\n\r\n\t\t\t\tthis.selectImgs = []\r\n\t\t\t},\r\n\t\t\tdelCancel(index) {\r\n\t\t\t\tfor (var i = 0; i < this.selectImgs.length; i++) {\r\n\t\t\t\t\tif (this.selectImgs[i] == index) {\r\n\t\t\t\t\t\tthis.selectImgs.splice(i, 1)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tbatchSave() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"保存中\",\r\n\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.selectImgs.forEach(item => {\r\n\t\t\t\t\tthis.downLoadImg(this.imgInfo.imgsUrl[item])\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"保存成功\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.batchSaveShow = false\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\r\n\t\t\ttoTagList(tid) {\r\n\t\t\t\tconsole.log(tid)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/tagImgList/tagImgList?tid=' + tid\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tshare(index) {\r\n\r\n\t\t\t\tif (index == 4) {\r\n\t\t\t\t\t//分享部分（暂未开发）\t\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import url(./main.css);\r\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=52f690a6&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1704811433853\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}